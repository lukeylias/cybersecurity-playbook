<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSI Model - Cybersecurity Fundamentals</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=DM+Sans:wght@400;500;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a1628;
            --bg-secondary: #0d1c30;
            --accent-primary: #4a6fa5;
            --accent-light: #7ba3d4;
            --accent-glow: rgba(74, 111, 165, 0.4);
            --text-primary: #e8f0f8;
            --text-secondary: #c4d4e8;
            --text-muted: #a8b8c8;
            --text-dim: #3a4a5a;
            --border-subtle: rgba(74, 111, 165, 0.2);
            --border-medium: rgba(74, 111, 165, 0.3);
            --surface-subtle: rgba(74, 111, 165, 0.08);
            --surface-medium: rgba(74, 111, 165, 0.15);
            --surface-active: rgba(74, 111, 165, 0.25);
            --font-mono: 'DM Mono', monospace;
            --font-sans: 'DM Sans', system-ui, sans-serif;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-secondary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Navigation */
        .site-nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(10, 22, 40, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border-subtle); }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 24px; display: flex; align-items: center; justify-content: space-between; height: 60px; }
        .nav-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; color: var(--text-primary); }
        .nav-logo-icon { width: 32px; height: 32px; border: 1px solid var(--accent-primary); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-family: var(--font-mono); font-size: 0.7rem; color: var(--accent-primary); }
        .nav-logo-text { font-weight: 500; font-size: 0.95rem; letter-spacing: 0.5px; }
        .nav-links { display: flex; align-items: center; gap: 6px; }
        .nav-dropdown { position: relative; }
        .nav-dropdown-btn { font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-muted); background: none; border: 1px solid transparent; padding: 8px 14px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 6px; transition: all 0.2s; letter-spacing: 0.5px; }
        .nav-dropdown-btn:hover, .nav-dropdown.open .nav-dropdown-btn { color: var(--text-primary); background: var(--surface-subtle); border-color: var(--border-subtle); }
        .nav-dropdown-btn svg { width: 10px; height: 10px; transition: transform 0.2s; }
        .nav-dropdown.open .nav-dropdown-btn svg { transform: rotate(180deg); }
        .nav-dropdown-menu { position: absolute; top: calc(100% + 8px); left: 0; background: rgba(13, 28, 48, 0.98); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 8px; min-width: 240px; opacity: 0; visibility: hidden; transform: translateY(-8px); transition: all 0.2s; box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5); backdrop-filter: blur(12px); }
        .nav-dropdown.open .nav-dropdown-menu { opacity: 1; visibility: visible; transform: translateY(0); }
        .nav-dropdown-item { display: block; padding: 10px 14px; color: var(--text-secondary); text-decoration: none; border-radius: 6px; transition: all 0.15s; }
        .nav-dropdown-item:hover { background: var(--surface-medium); color: var(--text-primary); }
        .nav-dropdown-item.current .nav-dropdown-item-title { color: var(--accent-light); }
        .nav-dropdown-item-title { font-size: 0.85rem; font-weight: 500; margin-bottom: 2px; }
        .nav-dropdown-item-desc { font-family: var(--font-mono); font-size: 0.65rem; color: var(--text-muted); }
        .nav-mobile-toggle { display: none; background: none; border: 1px solid var(--border-subtle); color: var(--text-muted); padding: 6px 10px; border-radius: 4px; cursor: pointer; font-family: var(--font-mono); font-size: 0.8rem; }
        .nav-mobile-toggle:hover { color: var(--text-primary); background: var(--surface-subtle); }
        @media (max-width: 640px) {
            .nav-links { display: none; position: absolute; top: 60px; left: 0; right: 0; background: rgba(10, 22, 40, 0.98); border-bottom: 1px solid var(--border-subtle); padding: 12px; flex-direction: column; gap: 4px; backdrop-filter: blur(12px); }
            .nav-links.mobile-open { display: flex; }
            .nav-mobile-toggle { display: block; }
            .nav-dropdown { width: 100%; }
            .nav-dropdown-btn { width: 100%; }
            .nav-dropdown-menu { position: static; opacity: 1; visibility: visible; transform: none; box-shadow: none; border: none; background: var(--surface-subtle); border-radius: 8px; display: none; margin-top: 4px; min-width: auto; }
            .nav-dropdown.open .nav-dropdown-menu { display: block; }
        }


        

        /* Page Layout */
        .page {
            padding-top: 60px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .page-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-title {
            color: var(--text-primary);
            font-size: 1.3rem;
            font-weight: 500;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: var(--accent-primary);
            font-family: var(--font-mono);
            font-size: 0.7rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* Main Content Layout */
        .main-content {
            display: flex;
            gap: 60px;
            align-items: flex-start;
        }

        .visualization {
            display: flex;
            gap: 60px;
            align-items: center;
        }

        /* Layer Stack */
        .stack {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .stack-label {
            font-family: var(--font-mono);
            text-align: center;
            color: var(--accent-primary);
            font-size: 0.7rem;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .layer {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 14px 20px;
            min-width: 200px;
            background: var(--surface-subtle);
            border: 1px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .layer:hover {
            background: var(--surface-medium);
        }

        .layer:first-of-type {
            border-radius: 8px 8px 0 0;
        }

        .layer:last-of-type {
            border-radius: 0 0 8px 8px;
        }

        .layer.active {
            background: var(--surface-active);
            border-color: var(--accent-primary);
            box-shadow: 0 0 40px var(--accent-glow);
            z-index: 10;
        }

        .layer.visited {
            background: rgba(74, 111, 165, 0.12);
        }

        .layer-num {
            font-family: var(--font-mono);
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--accent-primary);
            width: 20px;
        }

        .layer-name {
            font-weight: 500;
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        /* Connection Path */
        .path {
            position: relative;
            height: 390px;
            width: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .path-line {
            position: absolute;
            width: 1px;
            height: 100%;
            background: linear-gradient(to bottom, 
                rgba(74, 111, 165, 0.6),
                rgba(74, 111, 165, 0.2),
                rgba(74, 111, 165, 0.6)
            );
        }

        .packet {
            width: 52px;
            height: 52px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-mono);
            font-weight: 500;
            font-size: 0.55rem;
            letter-spacing: 0.5px;
            position: absolute;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--accent-primary);
            background: var(--bg-primary);
            color: var(--text-secondary);
        }

        .packet.active {
            background: var(--surface-active);
            box-shadow: 0 0 30px var(--accent-glow);
        }

        /* Info Panel */
        .info-panel {
            width: 320px;
            min-height: 400px;
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .info-icon {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--accent-primary);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--accent-primary);
            border-radius: 4px;
        }

        .info-title {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .info-phase {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            color: var(--accent-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .info-action {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--accent-light);
            margin-bottom: 16px;
            padding: 10px 14px;
            background: var(--surface-subtle);
            border-radius: 4px;
            border-left: 2px solid var(--accent-primary);
        }

        .info-description {
            font-size: 0.9rem;
            line-height: 1.7;
            color: var(--text-muted);
            margin-bottom: 20px;
        }

        .info-concepts {
            margin-top: 20px;
        }

        .info-concepts-title {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            color: var(--accent-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .concept-tag {
            display: inline-block;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--text-secondary);
            padding: 6px 12px;
            background: var(--surface-medium);
            border-radius: 4px;
            margin: 0 6px 8px 0;
        }

        .info-extra {
            margin-top: 24px;
            padding-top: 16px;
            border-top: 1px solid var(--border-subtle);
        }

        .info-extra-label {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            color: var(--accent-primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .info-extra-value {
            font-family: var(--font-mono);
            font-size: 1rem;
            color: var(--text-primary);
        }

        .info-intro {
            text-align: center;
            padding: 40px 20px;
        }

        .info-intro p {
            font-size: 0.9rem;
            line-height: 1.7;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        .info-intro .hint {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--accent-primary);
        }

        /* Navigation Controls */
        .nav-controls {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            align-items: center;
            justify-content: center;
        }

        button {
            font-family: var(--font-mono);
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--accent-primary);
            padding: 10px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            transition: all 0.2s;
        }

        button:hover {
            background: var(--surface-medium);
            border-color: var(--accent-light);
        }

        button:disabled {
            color: var(--text-dim);
            border-color: #2a3a4a;
            cursor: not-allowed;
        }

        button:disabled:hover {
            background: transparent;
        }

        button.primary {
            background: var(--surface-medium);
        }

        .progress-dots {
            display: flex;
            gap: 4px;
        }

        .progress-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--border-medium);
            transition: all 0.3s;
        }

        .progress-dot.active {
            background: var(--accent-primary);
        }

        .progress-dot.visited {
            background: rgba(74, 111, 165, 0.6);
        }

        @media (max-width: 900px) {
            .main-content {
                flex-direction: column;
                align-items: center;
            }
            
            .info-panel {
                width: 100%;
                max-width: 500px;
            }
        }
    </style>
</head>
<body>
    <nav class="site-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <div class="nav-logo-icon">CF</div>
                <span class="nav-logo-text">Cybersecurity Fundamentals</span>
            </a>
            <button class="nav-mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('mobile-open')">☰</button>
            <div class="nav-links">
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Networking <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="osi-model.html" class="nav-dropdown-item current">
                            <div class="nav-dropdown-item-title">OSI Model</div>
                            <div class="nav-dropdown-item-desc">7-layer communication framework</div>
                        </a>
                        <a href="dns.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">DNS Lookup</div>
                            <div class="nav-dropdown-item-desc">Domain name resolution</div>
                        </a>
                        <a href="tcp-handshake.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">TCP Handshake</div>
                            <div class="nav-dropdown-item-desc">Three-way connection establishment</div>
                        </a>
                        <a href="vpn.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">VPN</div>
                            <div class="nav-dropdown-item-desc">Encrypted tunnels & privacy</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Web <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="http.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">HTTP Protocol</div>
                            <div class="nav-dropdown-item-desc">Methods, status codes, headers</div>
                        </a>
                        <a href="cookies.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Cookies</div>
                            <div class="nav-dropdown-item-desc">Maintaining state on the web</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Systems <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="linux.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Linux Fundamentals</div>
                            <div class="nav-dropdown-item-desc">Command line essentials</div>
                        </a>
                        <a href="linux-admin.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Packages & Logs</div>
                            <div class="nav-dropdown-item-desc">Software management & system logs</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="page">
        <div class="page-content">
            <header class="page-header">
                <h1 class="page-title">OSI Model</h1>
                <p class="page-subtitle">Open Systems Interconnection</p>
                
                <div class="nav-controls">
                    <button id="prevBtn" onclick="prevStep()" disabled>← PREV</button>
                    <div class="progress-dots" id="progressDots"></div>
                    <button id="nextBtn" onclick="nextStep()" class="primary">NEXT →</button>
                </div>
            </header>

            <div class="main-content">
                <div class="visualization">
                    <div class="stack" id="sender">
                        <div class="stack-label">Sender</div>
                        <div class="layer" data-layer="7" data-side="sender" onclick="goToStep(0)"><span class="layer-num">7</span><span class="layer-name">Application</span></div>
                        <div class="layer" data-layer="6" data-side="sender" onclick="goToStep(1)"><span class="layer-num">6</span><span class="layer-name">Presentation</span></div>
                        <div class="layer" data-layer="5" data-side="sender" onclick="goToStep(2)"><span class="layer-num">5</span><span class="layer-name">Session</span></div>
                        <div class="layer" data-layer="4" data-side="sender" onclick="goToStep(3)"><span class="layer-num">4</span><span class="layer-name">Transport</span></div>
                        <div class="layer" data-layer="3" data-side="sender" onclick="goToStep(4)"><span class="layer-num">3</span><span class="layer-name">Network</span></div>
                        <div class="layer" data-layer="2" data-side="sender" onclick="goToStep(5)"><span class="layer-num">2</span><span class="layer-name">Data Link</span></div>
                        <div class="layer" data-layer="1" data-side="sender" onclick="goToStep(6)"><span class="layer-num">1</span><span class="layer-name">Physical</span></div>
                    </div>

                    <div class="path">
                        <div class="path-line"></div>
                        <div class="packet" id="packet">DATA</div>
                    </div>

                    <div class="stack" id="receiver">
                        <div class="stack-label">Receiver</div>
                        <div class="layer" data-layer="7" data-side="receiver" onclick="goToStep(14)"><span class="layer-num">7</span><span class="layer-name">Application</span></div>
                        <div class="layer" data-layer="6" data-side="receiver" onclick="goToStep(13)"><span class="layer-num">6</span><span class="layer-name">Presentation</span></div>
                        <div class="layer" data-layer="5" data-side="receiver" onclick="goToStep(12)"><span class="layer-num">5</span><span class="layer-name">Session</span></div>
                        <div class="layer" data-layer="4" data-side="receiver" onclick="goToStep(11)"><span class="layer-num">4</span><span class="layer-name">Transport</span></div>
                        <div class="layer" data-layer="3" data-side="receiver" onclick="goToStep(10)"><span class="layer-num">3</span><span class="layer-name">Network</span></div>
                        <div class="layer" data-layer="2" data-side="receiver" onclick="goToStep(9)"><span class="layer-num">2</span><span class="layer-name">Data Link</span></div>
                        <div class="layer" data-layer="1" data-side="receiver" onclick="goToStep(8)"><span class="layer-num">1</span><span class="layer-name">Physical</span></div>
                    </div>
                </div>

                <div class="info-panel" id="infoPanel">
                    <div class="info-intro">
                        <p>The OSI model breaks network communication into 7 layers. Each layer has a specific job and talks only to the layers directly above and below it.</p>
                        <p>When you send data, it travels down through all 7 layers on your device, across the network, then back up through all 7 layers on the receiving device.</p>
                        <p class="hint">Click a layer or press Next to begin →</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const packet = document.getElementById('packet');
        const infoPanel = document.getElementById('infoPanel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressDots = document.getElementById('progressDots');
        
        let currentStep = -1;
        const totalSteps = 15;

        // Create progress dots
        for (let i = 0; i < totalSteps; i++) {
            const dot = document.createElement('div');
            dot.className = 'progress-dot';
            progressDots.appendChild(dot);
        }

        const steps = [
            {
                side: 'sender', layer: 7, data: 'DATA',
                action: 'Creating the request',
                description: 'This is where your application lives — your web browser, email client, or any software that needs to send data. When you click a link or send a message, the application layer creates the request and prepares the data to be sent.',
                concepts: ['HTTP', 'FTP', 'SMTP', 'DNS', 'APIs'],
                dataUnit: 'Data'
            },
            {
                side: 'sender', layer: 6, data: 'DATA',
                action: 'Formatting and encrypting',
                description: 'The presentation layer is like a translator. It takes your data and converts it into a standard format that any system can understand. It also handles encryption (like HTTPS) to keep your data secure, and compression to make it smaller.',
                concepts: ['SSL/TLS', 'Encryption', 'JPEG', 'ASCII', 'Compression'],
                dataUnit: 'Data'
            },
            {
                side: 'sender', layer: 5, data: 'DATA',
                action: 'Opening a session',
                description: 'The session layer manages the conversation between two devices. It opens the connection, keeps it alive during the transfer, and closes it when done. Think of it as the layer that says "let\'s start talking" and "okay, we\'re done."',
                concepts: ['Sessions', 'Authentication', 'Checkpoints', 'RPC'],
                dataUnit: 'Data'
            },
            {
                side: 'sender', layer: 4, data: 'SEGMENT',
                action: 'Breaking into segments',
                description: 'The transport layer takes your data and breaks it into smaller chunks called segments. It adds port numbers so the right application receives the data. TCP ensures reliable delivery (retrying if something fails), while UDP is faster but doesn\'t guarantee delivery.',
                concepts: ['TCP', 'UDP', 'Ports', 'Segmentation', 'Flow control'],
                dataUnit: 'Segment'
            },
            {
                side: 'sender', layer: 3, data: 'PACKET',
                action: 'Adding IP addresses',
                description: 'The network layer adds logical addresses (IP addresses) to your data, creating packets. It figures out the best route for your data to travel across multiple networks to reach its destination. This is where routers operate.',
                concepts: ['IP addresses', 'Routing', 'IPv4/IPv6', 'ICMP', 'Routers'],
                dataUnit: 'Packet'
            },
            {
                side: 'sender', layer: 2, data: 'FRAME',
                action: 'Adding MAC addresses',
                description: 'The data link layer adds physical hardware addresses (MAC addresses) and packages everything into frames. It handles communication between devices on the same local network and includes error checking to detect corruption.',
                concepts: ['MAC addresses', 'Ethernet', 'Wi-Fi', 'Switches', 'Error detection'],
                dataUnit: 'Frame'
            },
            {
                side: 'sender', layer: 1, data: 'BITS',
                action: 'Converting to physical signals',
                description: 'The physical layer converts your digital frames into actual physical signals — electrical pulses over copper wire, light over fiber optic cable, or radio waves for Wi-Fi. This is the only layer that deals with real, tangible hardware.',
                concepts: ['Cables', 'Fiber optics', 'Radio waves', 'Hubs', 'Voltage'],
                dataUnit: 'Bits'
            },
            {
                side: 'transmission', layer: 0, data: 'BITS',
                action: 'Traveling across the network',
                description: 'Your data is now a stream of physical signals traveling through cables, across switches and routers, bouncing between cell towers or satellites. It might cross continents in milliseconds, hopping through dozens of devices to reach its destination.',
                concepts: ['Cables', 'Routers', 'Internet backbone', 'Latency'],
                dataUnit: 'Bits'
            },
            {
                side: 'receiver', layer: 1, data: 'BITS',
                action: 'Receiving physical signals',
                description: 'The receiving device\'s network card detects the physical signals and converts them back into digital bits. It synchronizes with the incoming signal to accurately read each 1 and 0.',
                concepts: ['Signal detection', 'Clock recovery', 'NIC', 'Decoding'],
                dataUnit: 'Bits'
            },
            {
                side: 'receiver', layer: 2, data: 'FRAME',
                action: 'Reading MAC addresses',
                description: 'The data link layer reassembles bits into frames and checks the MAC address. If it matches this device, the frame is accepted. Error checking ensures the data wasn\'t corrupted during transmission.',
                concepts: ['MAC validation', 'CRC check', 'Frame assembly', 'Error correction'],
                dataUnit: 'Frame'
            },
            {
                side: 'receiver', layer: 3, data: 'PACKET',
                action: 'Reading IP addresses',
                description: 'The network layer strips the frame header to reveal the packet. It checks the IP address to confirm this data has reached its final destination (not just passing through).',
                concepts: ['IP validation', 'Packet reassembly', 'TTL check', 'Routing complete'],
                dataUnit: 'Packet'
            },
            {
                side: 'receiver', layer: 4, data: 'SEGMENT',
                action: 'Reassembling segments',
                description: 'The transport layer collects all the segments and puts them back in the correct order. If using TCP, it sends acknowledgments back to the sender and requests retransmission of any missing pieces.',
                concepts: ['Reassembly', 'ACK packets', 'Port matching', 'Sequencing'],
                dataUnit: 'Segment'
            },
            {
                side: 'receiver', layer: 5, data: 'DATA',
                action: 'Managing the session',
                description: 'The session layer maintains the connection state, handling any session-level synchronization. It knows which conversation this data belongs to and keeps track of where you are in the exchange.',
                concepts: ['Session tracking', 'Sync points', 'Dialog control'],
                dataUnit: 'Data'
            },
            {
                side: 'receiver', layer: 6, data: 'DATA',
                action: 'Decrypting and parsing',
                description: 'The presentation layer reverses what the sender\'s presentation layer did. It decrypts the data, decompresses it if needed, and converts it from the standard format back into something the application can use.',
                concepts: ['Decryption', 'Decompression', 'Format conversion', 'Character encoding'],
                dataUnit: 'Data'
            },
            {
                side: 'receiver', layer: 7, data: 'DATA',
                action: 'Delivering to the application',
                description: 'Finally, the original data reaches the receiving application. Your web browser displays the webpage, your email client shows the message, or your video call shows the other person\'s face. The journey is complete.',
                concepts: ['Application delivery', 'User interface', 'Response handling'],
                dataUnit: 'Data'
            }
        ];

        function updateUI() {
            document.querySelectorAll('.progress-dot').forEach((dot, i) => {
                dot.classList.remove('active', 'visited');
                if (i === currentStep) dot.classList.add('active');
                else if (i < currentStep) dot.classList.add('visited');
            });

            prevBtn.disabled = currentStep <= 0;
            nextBtn.textContent = currentStep >= totalSteps - 1 ? 'RESTART' : 'NEXT →';

            document.querySelectorAll('.layer').forEach(layer => {
                layer.classList.remove('active', 'visited');
            });

            if (currentStep >= 0) {
                const step = steps[currentStep];
                
                if (step.side !== 'transmission') {
                    const stack = document.getElementById(step.side);
                    const layer = stack.querySelector(`[data-layer="${step.layer}"]`);
                    if (layer) layer.classList.add('active');
                }

                packet.textContent = step.data;
                packet.classList.add('active');
                
                if (step.side === 'sender') {
                    packet.style.left = '14px';
                    packet.style.top = `${(7 - step.layer) * 52 + 8}px`;
                } else if (step.side === 'transmission') {
                    packet.style.left = '14px';
                    packet.style.top = '170px';
                } else {
                    packet.style.left = '14px';
                    packet.style.top = `${(7 - step.layer) * 52 + 8}px`;
                }

                infoPanel.innerHTML = `
                    <div class="info-header">
                        <div class="info-icon">${step.layer || '⚡'}</div>
                        <div>
                            <div class="info-title">${step.side === 'transmission' ? 'Transmission' : getLayerName(step.layer)}</div>
                            <div class="info-phase">${step.side === 'transmission' ? 'Network' : step.side}</div>
                        </div>
                    </div>
                    <div class="info-action">${step.action}</div>
                    <p class="info-description">${step.description}</p>
                    <div class="info-concepts">
                        <div class="info-concepts-title">Key Concepts</div>
                        ${step.concepts.map(c => `<span class="concept-tag">${c}</span>`).join('')}
                    </div>
                    <div class="info-extra">
                        <div class="info-extra-label">Data Unit</div>
                        <div class="info-extra-value">${step.dataUnit}</div>
                    </div>
                `;

                for (let i = 0; i < currentStep; i++) {
                    const prevStep = steps[i];
                    if (prevStep.side !== 'transmission') {
                        const stack = document.getElementById(prevStep.side);
                        const layer = stack.querySelector(`[data-layer="${prevStep.layer}"]`);
                        if (layer && !layer.classList.contains('active')) {
                            layer.classList.add('visited');
                        }
                    }
                }
            } else {
                packet.classList.remove('active');
                packet.style.top = '8px';
                packet.style.left = '14px';
                packet.textContent = 'DATA';
                
                infoPanel.innerHTML = `
                    <div class="info-intro">
                        <p>The OSI model breaks network communication into 7 layers. Each layer has a specific job and talks only to the layers directly above and below it.</p>
                        <p>When you send data, it travels down through all 7 layers on your device, across the network, then back up through all 7 layers on the receiving device.</p>
                        <p class="hint">Click a layer or press Next to begin →</p>
                    </div>
                `;
            }
        }

        function getLayerName(num) {
            const names = { 7: 'Application', 6: 'Presentation', 5: 'Session', 4: 'Transport', 3: 'Network', 2: 'Data Link', 1: 'Physical' };
            return names[num] || '';
        }

        function goToStep(step) {
            currentStep = Math.max(-1, Math.min(totalSteps - 1, step));
            updateUI();
        }

        function nextStep() {
            if (currentStep >= totalSteps - 1) {
                currentStep = -1;
            } else {
                currentStep++;
            }
            updateUI();
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') nextStep();
            else if (e.key === 'ArrowLeft') prevStep();
        });

        updateUI();
    </script>
    <script>
        function toggleDropdown(btn) {
            const dropdown = btn.parentElement;
            const wasOpen = dropdown.classList.contains('open');
            document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            if (!wasOpen) dropdown.classList.add('open');
        }
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-dropdown')) {
                document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            }
        });
    </script>
</body>
</html>
