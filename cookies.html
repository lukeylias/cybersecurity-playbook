<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cpath d='M16 2L4 7v9c0 8 5 14 12 16 7-2 12-8 12-16V7L16 2z' fill='%230a1628' stroke='%234a6fa5' stroke-width='2'/%3E%3Ccircle cx='16' cy='13' r='3.5' fill='none' stroke='%237ba3d4' stroke-width='2'/%3E%3Crect x='14.5' y='15' width='3' height='5' rx='1' fill='%237ba3d4'/%3E%3C/svg%3E">
    <title>Cookies - Cybersecurity Fundamentals</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #0a1628;
            --bg-secondary: #0d1c30;
            --accent-primary: #4a6fa5;
            --accent-light: #7ba3d4;
            --accent-glow: rgba(74, 111, 165, 0.4);
            --text-primary: #e8f0f8;
            --text-secondary: #c4d4e8;
            --text-muted: #a8b8c8;
            --text-dim: #3a4a5a;
            --border-subtle: rgba(74, 111, 165, 0.2);
            --surface-subtle: rgba(74, 111, 165, 0.08);
            --surface-medium: rgba(74, 111, 165, 0.15);
            --surface-active: rgba(74, 111, 165, 0.25);
            --font-mono: 'DM Mono', monospace;
            --font-sans: 'DM Sans', system-ui, sans-serif;
            --cookie-color: #f59e0b;
            --cookie-glow: rgba(245, 158, 11, 0.3);
        }

        body { font-family: var(--font-sans); background: var(--bg-primary); color: var(--text-secondary); min-height: 100vh; line-height: 1.6; }

        /* Navigation */
        .site-nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(10, 22, 40, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border-subtle); }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 24px; display: flex; align-items: center; justify-content: space-between; height: 60px; }
        .nav-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; color: var(--text-primary); }
        .nav-logo-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; }
        .nav-logo-text { font-weight: 500; font-size: 0.95rem; letter-spacing: 0.5px; }
        .nav-links { display: flex; align-items: center; gap: 6px; }
        .nav-dropdown { position: relative; }
        .nav-dropdown-btn { font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-muted); background: none; border: 1px solid transparent; padding: 8px 14px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 6px; transition: all 0.2s; letter-spacing: 0.5px; }
        .nav-dropdown-btn:hover, .nav-dropdown.open .nav-dropdown-btn { color: var(--text-primary); background: var(--surface-subtle); border-color: var(--border-subtle); }
        .nav-dropdown-btn svg { width: 10px; height: 10px; transition: transform 0.2s; }
        .nav-dropdown.open .nav-dropdown-btn svg { transform: rotate(180deg); }
        .nav-dropdown-menu { position: absolute; top: calc(100% + 8px); left: 0; background: rgba(13, 28, 48, 0.98); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 8px; min-width: 240px; opacity: 0; visibility: hidden; transform: translateY(-8px); transition: all 0.2s; box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5); backdrop-filter: blur(12px); }
        .nav-dropdown.open .nav-dropdown-menu { opacity: 1; visibility: visible; transform: translateY(0); }
        .nav-dropdown-item { display: block; padding: 10px 14px; color: var(--text-secondary); text-decoration: none; border-radius: 6px; transition: all 0.15s; }
        .nav-dropdown-item:hover { background: var(--surface-medium); color: var(--text-primary); }
        .nav-dropdown-item.current .nav-dropdown-item-title { color: var(--accent-light); }
        .nav-dropdown-item-title { font-size: 0.85rem; font-weight: 500; margin-bottom: 2px; }
        .nav-dropdown-item-desc { font-family: var(--font-mono); font-size: 0.65rem; color: var(--text-muted); }
        .nav-mobile-toggle { display: none; background: none; border: 1px solid var(--border-subtle); color: var(--text-muted); padding: 6px 10px; border-radius: 4px; cursor: pointer; font-family: var(--font-mono); font-size: 0.8rem; }
        .nav-mobile-toggle:hover { color: var(--text-primary); background: var(--surface-subtle); }
        @media (max-width: 640px) {
            .nav-links { display: none; position: absolute; top: 60px; left: 0; right: 0; background: rgba(10, 22, 40, 0.98); border-bottom: 1px solid var(--border-subtle); padding: 12px; flex-direction: column; gap: 4px; backdrop-filter: blur(12px); }
            .nav-links.mobile-open { display: flex; }
            .nav-mobile-toggle { display: block; }
            .nav-dropdown { width: 100%; }
            .nav-dropdown-btn { width: 100%; }
            .nav-dropdown-menu { position: static; opacity: 1; visibility: visible; transform: none; box-shadow: none; border: none; background: var(--surface-subtle); border-radius: 8px; display: none; margin-top: 4px; min-width: auto; }
            .nav-dropdown.open .nav-dropdown-menu { display: block; }
        }


        
        
        
        
        
        
        
        
        

        .page { padding-top: 60px; min-height: 100vh; display: flex; flex-direction: column; }
        .page-content { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 40px 20px; }

        .page-header { text-align: center; margin-bottom: 24px; }
        .page-title { color: var(--text-primary); font-size: 1.3rem; font-weight: 500; letter-spacing: 1px; margin-bottom: 8px; }
        .page-subtitle { color: var(--accent-primary); font-family: var(--font-mono); font-size: 0.7rem; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 16px; }
        .page-intro { color: var(--text-muted); font-size: 0.9rem; max-width: 550px; margin: 0 auto; line-height: 1.7; }
        .page-intro strong { color: var(--text-secondary); }

        .nav-controls { display: flex; gap: 12px; margin-top: 24px; align-items: center; justify-content: center; }
        button { font-family: var(--font-mono); background: transparent; color: var(--text-secondary); border: 1px solid var(--accent-primary); padding: 10px 24px; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: 500; letter-spacing: 0.5px; transition: all 0.2s; }
        button:hover { background: var(--surface-medium); border-color: var(--accent-light); }
        button:disabled { color: var(--text-dim); border-color: #2a3a4a; cursor: not-allowed; }
        button:disabled:hover { background: transparent; }
        button.primary { background: var(--surface-medium); }
        .progress-dots { display: flex; gap: 4px; }
        .progress-dot { width: 6px; height: 6px; border-radius: 50%; background: rgba(74, 111, 165, 0.3); transition: all 0.3s; }
        .progress-dot.active { background: var(--accent-primary); }
        .progress-dot.visited { background: rgba(74, 111, 165, 0.6); }

        .main-content { display: flex; gap: 50px; align-items: flex-start; margin-top: 20px; }

        /* Cookie Visualization */
        .cookie-visualization { position: relative; width: 520px; height: 380px; }

        .vis-entity { position: absolute; padding: 20px; background: var(--surface-subtle); border: 1px solid transparent; border-radius: 12px; transition: all 0.4s; text-align: center; }
        .vis-entity.active { background: var(--surface-active); border-color: var(--accent-primary); box-shadow: 0 0 40px var(--accent-glow); }
        .vis-entity-icon { font-size: 2rem; margin-bottom: 8px; }
        .vis-entity-label { font-family: var(--font-mono); font-size: 0.65rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
        .vis-entity-title { font-weight: 500; font-size: 0.9rem; color: var(--text-primary); }

        .entity-browser { top: 160px; left: 20px; width: 130px; }
        .entity-server { top: 160px; right: 20px; width: 130px; }
        .entity-storage { top: 330px; left: 20px; width: 130px; }

        /* Cookie jar visualization */
        .cookie-jar { position: absolute; top: 300px; left: 50px; width: 60px; height: 70px; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; padding-bottom: 8px; transition: all 0.3s; }
        .cookie-jar-icon { font-size: 2.5rem; }
        .cookie-jar.has-cookie .cookie-jar-icon { filter: drop-shadow(0 0 10px var(--cookie-glow)); }

        /* Request/Response visualization */
        .message-area { position: absolute; top: 20px; left: 170px; right: 170px; height: 130px; }

        .http-message { position: absolute; background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 8px; padding: 12px 16px; font-family: var(--font-mono); font-size: 0.7rem; opacity: 0; transition: all 0.5s; max-width: 200px; }
        .http-message.visible { opacity: 1; }
        .http-message.request { left: 0; }
        .http-message.response { right: 0; }
        .http-message-type { color: var(--accent-primary); font-size: 0.6rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; }
        .http-message-content { color: var(--text-secondary); line-height: 1.6; }
        .http-message-content .header-name { color: var(--accent-light); }
        .http-message-content .cookie-value { color: var(--cookie-color); }

        /* Animated cookie */
        .flying-cookie { position: absolute; font-size: 1.5rem; opacity: 0; transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1); z-index: 20; }
        .flying-cookie.visible { opacity: 1; }

        /* Connection lines */
        .connection-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .connection-line { fill: none; stroke: var(--border-subtle); stroke-width: 1; stroke-dasharray: 4 4; }
        .connection-line.active { stroke: var(--accent-primary); stroke-width: 2; stroke-dasharray: none; }
        .connection-line.cookie-active { stroke: var(--cookie-color); stroke-width: 2; stroke-dasharray: none; }

        /* Info Panel */
        .info-panel { width: 320px; min-height: 380px; }
        .info-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border-subtle); }
        .info-icon { font-size: 1.5rem; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--accent-primary); border-radius: 4px; }
        .info-step { font-family: var(--font-mono); font-size: 0.65rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 1px; }
        .info-title { font-size: 1.1rem; font-weight: 500; color: var(--text-primary); }
        .info-action { font-family: var(--font-mono); font-size: 0.8rem; color: var(--accent-light); margin-bottom: 16px; padding: 10px 14px; background: var(--surface-subtle); border-radius: 4px; border-left: 2px solid var(--accent-primary); }
        .info-description { font-size: 0.9rem; line-height: 1.7; color: var(--text-muted); margin-bottom: 20px; }
        .info-code { background: var(--surface-subtle); border-radius: 6px; padding: 14px; margin-bottom: 16px; font-family: var(--font-mono); font-size: 0.75rem; line-height: 1.8; overflow-x: auto; }
        .info-code .header { color: var(--accent-light); }
        .info-code .value { color: var(--text-primary); }
        .info-code .cookie { color: var(--cookie-color); }
        .info-concepts { margin-top: 20px; }
        .info-concepts-title { font-family: var(--font-mono); font-size: 0.65rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
        .concept-tag { display: inline-block; font-family: var(--font-mono); font-size: 0.7rem; color: var(--text-secondary); padding: 6px 12px; background: var(--surface-medium); border-radius: 4px; margin: 0 6px 8px 0; }

        .info-intro { text-align: center; padding: 30px 20px; }
        .info-intro p { font-size: 0.9rem; line-height: 1.7; color: var(--text-muted); margin-bottom: 16px; }
        .info-intro .hint { font-family: var(--font-mono); font-size: 0.75rem; color: var(--accent-primary); }
        .info-intro .why-box { background: var(--surface-subtle); border-radius: 8px; padding: 16px; margin: 20px 0; text-align: left; }
        .info-intro .why-box-title { font-family: var(--font-mono); font-size: 0.65rem; color: var(--cookie-color); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .info-intro .why-box p { margin-bottom: 8px; font-size: 0.85rem; }
        .info-intro .why-box p:last-child { margin-bottom: 0; }

        @media (max-width: 900px) {
            .main-content { flex-direction: column; align-items: center; }
            .cookie-visualization { transform: scale(0.85); transform-origin: top center; }
            .info-panel { width: 100%; max-width: 400px; }
        }
    </style>
</head>
<body>
    <nav class="site-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <div class="nav-logo-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="100%" height="100%"><path d="M16 2L4 7v9c0 8 5 14 12 16 7-2 12-8 12-16V7L16 2z" fill="#0a1628" stroke="#4a6fa5" stroke-width="2"/><circle cx="16" cy="13" r="3.5" fill="none" stroke="#7ba3d4" stroke-width="2"/><rect x="14.5" y="15" width="3" height="5" rx="1" fill="#7ba3d4"/></svg></div>
                <span class="nav-logo-text">Cybersecurity Fundamentals</span>
            </a>
            <button class="nav-mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('mobile-open')">‚ò∞</button>
            <div class="nav-links">
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Networking <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="network-fundamentals.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Network Fundamentals</div>
                            <div class="nav-dropdown-item-desc">IPs, ports, servers & clients</div>
                        </a>
                        <a href="ports.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Ports Reference</div>
                            <div class="nav-dropdown-item-desc">Common ports & red team quick ref</div>
                        </a>
                        <a href="osi-model.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">OSI Model</div>
                            <div class="nav-dropdown-item-desc">7-layer communication framework</div>
                        </a>
                        <a href="tcp-ip-model.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">TCP/IP Model</div>
                            <div class="nav-dropdown-item-desc">4-layer practical internet model</div>
                        </a>
                        <a href="arp.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">ARP Protocol</div>
                            <div class="nav-dropdown-item-desc">IP to MAC address resolution</div>
                        </a>
                        <a href="dns.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">DNS Lookup</div>
                            <div class="nav-dropdown-item-desc">Domain name resolution</div>
                        </a>
                        <a href="tcp-handshake.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">TCP Handshake</div>
                            <div class="nav-dropdown-item-desc">Three-way connection establishment</div>
                        </a>
                        <a href="vpn.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">VPN</div>
                            <div class="nav-dropdown-item-desc">Encrypted tunnels & privacy</div>
                        </a>
                        <a href="ssh.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">SSH</div>
                            <div class="nav-dropdown-item-desc">Secure remote access & key auth</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Web <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="http.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">HTTP Protocol</div>
                            <div class="nav-dropdown-item-desc">Methods, status codes, headers</div>
                        </a>
                        <a href="cookies.html" class="nav-dropdown-item current">
                            <div class="nav-dropdown-item-title">Cookies</div>
                            <div class="nav-dropdown-item-desc">Maintaining state on the web</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Linux <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="linux.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Linux Command Line</div>
                            <div class="nav-dropdown-item-desc">Command line essentials</div>
                        </a>
                        <a href="linux-admin.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Packages & Logs</div>
                            <div class="nav-dropdown-item-desc">Software management & system logs</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Windows <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="windows-essentials.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Windows Essentials</div>
                            <div class="nav-dropdown-item-desc">MSConfig, utilities & admin tools</div>
                        </a>
                        <a href="windows-cmd.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Windows Command Line (CMD)</div>
                            <div class="nav-dropdown-item-desc">CMD commands & terminal reference</div>
                        </a>
                        <a href="windows-powershell.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Windows PowerShell</div>
                            <div class="nav-dropdown-item-desc">PowerShell cmdlets & scripting</div>
                        </a>
                        <a href="windows-security.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Windows Security</div>
                            <div class="nav-dropdown-item-desc">Defender, firewall & device protection</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Practical <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="ctf-methodology.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">CTF Methodology</div>
                            <div class="nav-dropdown-item-desc">Systematic approach to CTF challenges</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="page">
        <div class="page-content">
            <header class="page-header">
                <h1 class="page-title">HTTP Cookies</h1>
                <p class="page-subtitle">Maintaining State on the Stateless Web</p>
                <p class="page-intro">HTTP is stateless ‚Äî each request is independent with no memory of previous ones. <strong>Cookies</strong> solve this by letting servers store small pieces of data in your browser that get sent back with every request.</p>
                
                <div class="nav-controls">
                    <button id="prevBtn" onclick="prevStep()" disabled>‚Üê PREV</button>
                    <div class="progress-dots" id="progressDots"></div>
                    <button id="nextBtn" onclick="nextStep()" class="primary">NEXT ‚Üí</button>
                </div>
            </header>

            <div class="main-content">
                <div class="cookie-visualization">
                    <svg class="connection-svg" viewBox="0 0 520 380">
                        <!-- Browser to Server (horizontal between boxes, at vertical center) -->
                        <path id="line-request" class="connection-line" d="M 150 200 Q 260 180 370 200" />
                        <!-- Server to Browser (curved below) -->
                        <path id="line-response" class="connection-line" d="M 370 210 Q 260 230 150 210" />
                        <!-- Browser to Storage (short vertical connector on left) -->
                        <path id="line-storage" class="connection-line" d="M 85 265 L 85 330" />
                    </svg>

                    <div class="vis-entity entity-browser" id="entityBrowser">
                        <div class="vis-entity-icon">üåê</div>
                        <div class="vis-entity-label">Your</div>
                        <div class="vis-entity-title">Browser</div>
                    </div>

                    <div class="vis-entity entity-server" id="entityServer">
                        <div class="vis-entity-icon">üñ•Ô∏è</div>
                        <div class="vis-entity-label">Web</div>
                        <div class="vis-entity-title">Server</div>
                    </div>

                    <div class="vis-entity entity-storage" id="entityStorage">
                        <div class="vis-entity-icon">üíæ</div>
                        <div class="vis-entity-label">Cookie</div>
                        <div class="vis-entity-title">Storage</div>
                    </div>

                    <div class="message-area">
                        <div class="http-message request" id="msgRequest" style="top: 0;">
                            <div class="http-message-type">Request</div>
                            <div class="http-message-content" id="msgRequestContent"></div>
                        </div>
                        <div class="http-message response" id="msgResponse" style="top: 60px;">
                            <div class="http-message-type">Response</div>
                            <div class="http-message-content" id="msgResponseContent"></div>
                        </div>
                    </div>

                    <div class="flying-cookie" id="flyingCookie">üç™</div>
                </div>

                <div class="info-panel" id="infoPanel">
                    <div class="info-intro">
                        <div class="why-box">
                            <div class="why-box-title">üç™ Why cookies exist</div>
                            <p>Without cookies, every page load would be a fresh start. The server wouldn't know if you're logged in, what's in your cart, or your preferences.</p>
                            <p>Cookies give HTTP a "memory" ‚Äî a way to recognize you across requests.</p>
                        </div>
                        <p class="hint">Click Next to see the cookie lifecycle ‚Üí</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const infoPanel = document.getElementById('infoPanel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressDots = document.getElementById('progressDots');
        const flyingCookie = document.getElementById('flyingCookie');
        const msgRequest = document.getElementById('msgRequest');
        const msgResponse = document.getElementById('msgResponse');
        const msgRequestContent = document.getElementById('msgRequestContent');
        const msgResponseContent = document.getElementById('msgResponseContent');

        let currentStep = -1;
        const totalSteps = 5;

        for (let i = 0; i < totalSteps; i++) {
            const dot = document.createElement('div');
            dot.className = 'progress-dot';
            progressDots.appendChild(dot);
        }

        const steps = [
            {
                icon: 'üì§',
                title: 'Initial Request',
                step: 'Step 1 of 4',
                action: 'Browser sends first request (no cookies yet)',
                description: 'When you first visit a website, your browser sends a request with no cookies. The server has no idea who you are ‚Äî you\'re just an anonymous visitor. This is the "stateless" nature of HTTP.',
                code: '<span class="header">GET</span> <span class="value">/login</span> HTTP/1.1\n<span class="header">Host:</span> <span class="value">example.com</span>\n<span class="header">User-Agent:</span> <span class="value">Mozilla/5.0...</span>\n\n<span style="color: var(--text-dim);">// No Cookie header yet!</span>',
                concepts: ['Stateless', 'HTTP Request', 'Anonymous'],
                activeEntities: ['browser', 'server'],
                activeLine: 'request',
                showRequest: true,
                requestContent: '<span class="header-name">GET</span> /login\n<span style="color: var(--text-dim);">(no cookies)</span>',
                showResponse: false
            },
            {
                icon: 'üç™',
                title: 'Server Sets Cookie',
                step: 'Step 2 of 4',
                action: 'Server responds with Set-Cookie header',
                description: 'After you log in, the server creates a session and tells your browser to remember it. The Set-Cookie header contains the cookie data plus rules about when to send it back.',
                code: 'HTTP/1.1 <span class="value">200 OK</span>\n<span class="header">Set-Cookie:</span> <span class="cookie">session_id=abc123</span>;\n            <span class="value">HttpOnly; Secure; Path=/</span>\n<span class="header">Content-Type:</span> <span class="value">text/html</span>',
                concepts: ['Set-Cookie', 'Session ID', 'HttpOnly', 'Secure'],
                activeEntities: ['server'],
                activeLine: 'response',
                showRequest: false,
                showResponse: true,
                responseContent: '<span class="header-name">Set-Cookie:</span>\n<span class="cookie-value">session_id=abc123</span>',
                animateCookie: { from: 'server', to: 'browser' }
            },
            {
                icon: 'üíæ',
                title: 'Browser Stores Cookie',
                step: 'Step 3 of 4',
                action: 'Browser saves the cookie locally',
                description: 'Your browser extracts the cookie from the response and stores it. It remembers which domain set it, when it expires, and any security flags. This happens automatically ‚Äî no JavaScript needed.',
                code: '<span class="header">Stored Cookie:</span>\n<span class="cookie">session_id</span> = <span class="value">abc123</span>\n<span class="header">Domain:</span> <span class="value">example.com</span>\n<span class="header">Expires:</span> <span class="value">Session</span>\n<span class="header">Flags:</span> <span class="value">HttpOnly, Secure</span>',
                concepts: ['Browser Storage', 'Domain', 'Expiry', 'Flags'],
                activeEntities: ['browser', 'storage'],
                activeLine: 'storage',
                showRequest: false,
                showResponse: false,
                animateCookie: { from: 'browser', to: 'storage' }
            },
            {
                icon: 'üîÑ',
                title: 'Cookie Sent Automatically',
                step: 'Step 4 of 4',
                action: 'Browser includes cookie in future requests',
                description: 'Every time you make a request to the same domain, your browser automatically attaches matching cookies. The server reads them to identify you ‚Äî that\'s how it knows you\'re logged in!',
                code: '<span class="header">GET</span> <span class="value">/dashboard</span> HTTP/1.1\n<span class="header">Host:</span> <span class="value">example.com</span>\n<span class="header">Cookie:</span> <span class="cookie">session_id=abc123</span>\n\n<span style="color: var(--text-dim);">// Server sees: "Oh, it\'s user #123!"</span>',
                concepts: ['Cookie Header', 'Automatic', 'Authentication'],
                activeEntities: ['browser', 'server', 'storage'],
                activeLine: 'request',
                showRequest: true,
                requestContent: '<span class="header-name">GET</span> /dashboard\n<span class="header-name">Cookie:</span> <span class="cookie-value">session_id=abc123</span>',
                showResponse: false,
                animateCookie: { from: 'storage', to: 'request' }
            },
            {
                icon: '‚úÖ',
                title: 'Server Recognizes You',
                step: 'Complete',
                action: 'Server uses cookie to maintain state',
                description: 'The server looks up the session ID and finds your data ‚Äî you\'re logged in, your cart is intact, your preferences are loaded. All because of a tiny piece of text that travels with every request.',
                code: '<span style="color: var(--text-dim);">// Server-side pseudocode</span>\n<span class="header">session</span> = <span class="value">lookup</span>(<span class="cookie">"abc123"</span>)\n<span class="header">user</span> = session.<span class="value">user</span>  <span style="color: var(--text-dim);">// "John"</span>\n<span class="header">cart</span> = session.<span class="value">cart</span>  <span style="color: var(--text-dim);">// [items...]</span>',
                concepts: ['Session', 'State', 'Personalization'],
                activeEntities: ['server'],
                activeLine: null,
                showRequest: false,
                showResponse: true,
                responseContent: '<span class="header-name">200 OK</span>\nWelcome back, John!'
            }
        ];

        function updateUI() {
            document.querySelectorAll('.progress-dot').forEach((dot, i) => {
                dot.classList.remove('active', 'visited');
                if (i === currentStep) dot.classList.add('active');
                else if (i < currentStep) dot.classList.add('visited');
            });

            prevBtn.disabled = currentStep <= 0;
            nextBtn.textContent = currentStep >= totalSteps - 1 ? 'RESTART' : 'NEXT ‚Üí';

            // Reset visuals
            document.querySelectorAll('.vis-entity').forEach(e => e.classList.remove('active'));
            document.querySelectorAll('.connection-line').forEach(l => {
                l.classList.remove('active', 'cookie-active');
            });
            msgRequest.classList.remove('visible');
            msgResponse.classList.remove('visible');
            flyingCookie.classList.remove('visible');
            flyingCookie.style.transform = '';

            if (currentStep >= 0) {
                const step = steps[currentStep];

                // Activate entities
                step.activeEntities?.forEach(id => {
                    document.getElementById(`entity${id.charAt(0).toUpperCase() + id.slice(1)}`)?.classList.add('active');
                });

                // Activate connection lines
                if (step.activeLine === 'request') {
                    document.getElementById('line-request').classList.add('active');
                } else if (step.activeLine === 'response') {
                    document.getElementById('line-response').classList.add('cookie-active');
                } else if (step.activeLine === 'storage') {
                    document.getElementById('line-storage').classList.add('cookie-active');
                }

                // Show messages
                if (step.showRequest) {
                    msgRequestContent.innerHTML = step.requestContent;
                    msgRequest.classList.add('visible');
                }
                if (step.showResponse) {
                    msgResponseContent.innerHTML = step.responseContent;
                    msgResponse.classList.add('visible');
                }

                // Animate cookie
                if (step.animateCookie) {
                    const positions = {
                        server: { top: 195, left: 390 },
                        browser: { top: 195, left: 110 },
                        storage: { top: 355, left: 110 },
                        request: { top: 195, left: 250 }
                    };
                    const from = positions[step.animateCookie.from];
                    const to = positions[step.animateCookie.to];
                    
                    flyingCookie.style.top = from.top + 'px';
                    flyingCookie.style.left = from.left + 'px';
                    flyingCookie.classList.add('visible');
                    
                    setTimeout(() => {
                        flyingCookie.style.top = to.top + 'px';
                        flyingCookie.style.left = to.left + 'px';
                    }, 100);
                }

                // Update info panel
                infoPanel.innerHTML = `
                    <div class="info-header">
                        <div class="info-icon">${step.icon}</div>
                        <div>
                            <div class="info-step">${step.step}</div>
                            <div class="info-title">${step.title}</div>
                        </div>
                    </div>
                    <div class="info-action">${step.action}</div>
                    <p class="info-description">${step.description}</p>
                    <div class="info-code">${step.code}</div>
                    <div class="info-concepts">
                        <div class="info-concepts-title">Key Concepts</div>
                        ${step.concepts.map(c => `<span class="concept-tag">${c}</span>`).join('')}
                    </div>
                `;
            } else {
                infoPanel.innerHTML = `
                    <div class="info-intro">
                        <div class="why-box">
                            <div class="why-box-title">üç™ Why cookies exist</div>
                            <p>Without cookies, every page load would be a fresh start. The server wouldn't know if you're logged in, what's in your cart, or your preferences.</p>
                            <p>Cookies give HTTP a "memory" ‚Äî a way to recognize you across requests.</p>
                        </div>
                        <p class="hint">Click Next to see the cookie lifecycle ‚Üí</p>
                    </div>
                `;
            }
        }

        function goToStep(step) {
            currentStep = Math.max(-1, Math.min(totalSteps - 1, step));
            updateUI();
        }

        function nextStep() {
            currentStep = currentStep >= totalSteps - 1 ? -1 : currentStep + 1;
            updateUI();
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') nextStep();
            else if (e.key === 'ArrowLeft') prevStep();
        });

        updateUI();
    </script>
    <script>
        function toggleDropdown(btn) {
            const dropdown = btn.parentElement;
            const wasOpen = dropdown.classList.contains('open');
            document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            if (!wasOpen) dropdown.classList.add('open');
        }
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-dropdown')) {
                document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            }
        });
    </script>
</body>
</html>
