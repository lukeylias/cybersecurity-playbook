<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cpath d='M16 2L4 7v9c0 8 5 14 12 16 7-2 12-8 12-16V7L16 2z' fill='%230a1628' stroke='%234a6fa5' stroke-width='2'/%3E%3Ccircle cx='16' cy='13' r='3.5' fill='none' stroke='%237ba3d4' stroke-width='2'/%3E%3Crect x='14.5' y='15' width='3' height='5' rx='1' fill='%237ba3d4'/%3E%3C/svg%3E">
    <title>DNS Lookup - Cybersecurity Fundamentals</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #0a1628;
            --bg-secondary: #0d1c30;
            --accent-primary: #4a6fa5;
            --accent-light: #7ba3d4;
            --accent-glow: rgba(74, 111, 165, 0.4);
            --text-primary: #e8f0f8;
            --text-secondary: #c4d4e8;
            --text-muted: #a8b8c8;
            --text-dim: #3a4a5a;
            --border-subtle: rgba(74, 111, 165, 0.2);
            --surface-subtle: rgba(74, 111, 165, 0.08);
            --surface-medium: rgba(74, 111, 165, 0.15);
            --surface-active: rgba(74, 111, 165, 0.25);
            --font-mono: 'DM Mono', monospace;
            --font-sans: 'DM Sans', system-ui, sans-serif;
        }

        body { font-family: var(--font-sans); background: var(--bg-primary); color: var(--text-secondary); min-height: 100vh; line-height: 1.6; }

        /* Navigation */
        .site-nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(10, 22, 40, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border-subtle); }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 24px; display: flex; align-items: center; justify-content: space-between; height: 60px; }
        .nav-logo { display: flex; align-items: center; gap: 12px; text-decoration: none; color: var(--text-primary); }
        .nav-logo-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; }
        .nav-logo-text { font-weight: 500; font-size: 0.95rem; letter-spacing: 0.5px; }
        .nav-links { display: flex; align-items: center; gap: 6px; }
        .nav-dropdown { position: relative; }
        .nav-dropdown-btn { font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-muted); background: none; border: 1px solid transparent; padding: 8px 14px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 6px; transition: all 0.2s; letter-spacing: 0.5px; }
        .nav-dropdown-btn:hover, .nav-dropdown.open .nav-dropdown-btn { color: var(--text-primary); background: var(--surface-subtle); border-color: var(--border-subtle); }
        .nav-dropdown-btn svg { width: 10px; height: 10px; transition: transform 0.2s; }
        .nav-dropdown.open .nav-dropdown-btn svg { transform: rotate(180deg); }
        .nav-dropdown-menu { position: absolute; top: calc(100% + 8px); left: 0; background: rgba(13, 28, 48, 0.98); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 8px; min-width: 240px; opacity: 0; visibility: hidden; transform: translateY(-8px); transition: all 0.2s; box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5); backdrop-filter: blur(12px); }
        .nav-dropdown.open .nav-dropdown-menu { opacity: 1; visibility: visible; transform: translateY(0); }
        .nav-dropdown-item { display: block; padding: 10px 14px; color: var(--text-secondary); text-decoration: none; border-radius: 6px; transition: all 0.15s; }
        .nav-dropdown-item:hover { background: var(--surface-medium); color: var(--text-primary); }
        .nav-dropdown-item.current .nav-dropdown-item-title { color: var(--accent-light); }
        .nav-dropdown-item-title { font-size: 0.85rem; font-weight: 500; margin-bottom: 2px; }
        .nav-dropdown-item-desc { font-family: var(--font-mono); font-size: 0.65rem; color: var(--text-muted); }
        .nav-mobile-toggle { display: none; background: none; border: 1px solid var(--border-subtle); color: var(--text-muted); padding: 6px 10px; border-radius: 4px; cursor: pointer; font-family: var(--font-mono); font-size: 0.8rem; }
        .nav-mobile-toggle:hover { color: var(--text-primary); background: var(--surface-subtle); }
        @media (max-width: 640px) {
            .nav-links { display: none; position: absolute; top: 60px; left: 0; right: 0; background: rgba(10, 22, 40, 0.98); border-bottom: 1px solid var(--border-subtle); padding: 12px; flex-direction: column; gap: 4px; backdrop-filter: blur(12px); }
            .nav-links.mobile-open { display: flex; }
            .nav-mobile-toggle { display: block; }
            .nav-dropdown { width: 100%; }
            .nav-dropdown-btn { width: 100%; }
            .nav-dropdown-menu { position: static; opacity: 1; visibility: visible; transform: none; box-shadow: none; border: none; background: var(--surface-subtle); border-radius: 8px; display: none; margin-top: 4px; min-width: auto; }
            .nav-dropdown.open .nav-dropdown-menu { display: block; }
        }


        
        
        
        
        
        
        
        
        

        .page { padding-top: 60px; min-height: 100vh; display: flex; flex-direction: column; }
        .page-content { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 40px 20px; }
        .page-header { text-align: center; margin-bottom: 40px; }
        .page-title { color: var(--text-primary); font-size: 1.3rem; font-weight: 500; letter-spacing: 1px; margin-bottom: 8px; }
        .page-subtitle { color: var(--accent-primary); font-family: var(--font-mono); font-size: 0.7rem; letter-spacing: 2px; text-transform: uppercase; }

        .main-content { display: flex; gap: 60px; align-items: flex-start; }

        .dns-visualization { position: relative; width: 480px; height: 500px; }

        .dns-node { position: absolute; padding: 14px 18px; background: var(--surface-subtle); border: 1px solid transparent; border-radius: 8px; transition: all 0.3s; cursor: pointer; min-width: 110px; text-align: center; }
        .dns-node:hover { background: var(--surface-medium); }
        .dns-node.active { background: var(--surface-active); border-color: var(--accent-primary); box-shadow: 0 0 40px var(--accent-glow); z-index: 10; }
        .dns-node.visited { background: rgba(74, 111, 165, 0.12); }
        .dns-node-icon { font-size: 1.3rem; margin-bottom: 6px; }
        .dns-node-label { font-family: var(--font-mono); font-size: 0.6rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 2px; }
        .dns-node-title { font-weight: 500; font-size: 0.8rem; color: var(--text-primary); }

        .node-browser { top: 0; left: 185px; }
        .node-cache { top: 110px; left: 20px; }
        .node-resolver { top: 110px; left: 340px; }
        .node-root { top: 220px; left: 340px; }
        .node-tld { top: 330px; left: 340px; }
        .node-auth { top: 440px; left: 340px; }
        .node-result { top: 440px; left: 20px; }

        .dns-connections { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .dns-connections svg { width: 100%; height: 100%; }
        .connection-path { fill: none; stroke: var(--border-subtle); stroke-width: 1; stroke-dasharray: 4 4; }
        .connection-path.active { stroke: var(--accent-primary); stroke-dasharray: none; stroke-width: 2; }

        .query-packet { position: absolute; width: 36px; height: 36px; border-radius: 50%; background: var(--bg-primary); border: 2px solid var(--accent-primary); display: flex; align-items: center; justify-content: center; font-family: var(--font-mono); font-size: 0.7rem; color: var(--accent-light); transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); z-index: 20; opacity: 0; }
        .query-packet.visible { opacity: 1; box-shadow: 0 0 20px var(--accent-glow); }

        .info-panel { width: 320px; min-height: 420px; }
        .info-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid var(--border-subtle); }
        .info-icon { font-size: 1.5rem; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--accent-primary); border-radius: 4px; }
        .info-title { font-size: 1.2rem; font-weight: 500; color: var(--text-primary); }
        .info-phase { font-family: var(--font-mono); font-size: 0.65rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 1px; }
        .info-action { font-family: var(--font-mono); font-size: 0.8rem; color: var(--accent-light); margin-bottom: 16px; padding: 10px 14px; background: var(--surface-subtle); border-radius: 4px; border-left: 2px solid var(--accent-primary); }
        .info-description { font-size: 0.9rem; line-height: 1.7; color: var(--text-muted); margin-bottom: 20px; }
        .info-example { background: var(--surface-subtle); border-radius: 6px; padding: 14px; margin-bottom: 20px; }
        .info-example-label { font-family: var(--font-mono); font-size: 0.65rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .info-example-content { font-family: var(--font-mono); font-size: 0.85rem; color: var(--text-primary); }
        .info-example-content .dim { color: var(--text-muted); }
        .info-concepts { margin-top: 20px; }
        .info-concepts-title { font-family: var(--font-mono); font-size: 0.65rem; color: var(--accent-primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
        .concept-tag { display: inline-block; font-family: var(--font-mono); font-size: 0.7rem; color: var(--text-secondary); padding: 6px 12px; background: var(--surface-medium); border-radius: 4px; margin: 0 6px 8px 0; }
        .info-intro { text-align: center; padding: 40px 20px; }
        .info-intro p { font-size: 0.9rem; line-height: 1.7; color: var(--text-muted); margin-bottom: 16px; }
        .info-intro .hint { font-family: var(--font-mono); font-size: 0.75rem; color: var(--accent-primary); }
        .info-intro .domain-example { font-family: var(--font-mono); font-size: 1.1rem; color: var(--text-primary); background: var(--surface-subtle); padding: 12px 20px; border-radius: 6px; margin: 20px 0; display: inline-block; }

        .nav-controls { display: flex; gap: 12px; margin-top: 24px; align-items: center; justify-content: center; }
        button { font-family: var(--font-mono); background: transparent; color: var(--text-secondary); border: 1px solid var(--accent-primary); padding: 10px 24px; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: 500; letter-spacing: 0.5px; transition: all 0.2s; }
        button:hover { background: var(--surface-medium); border-color: var(--accent-light); }
        button:disabled { color: var(--text-dim); border-color: #2a3a4a; cursor: not-allowed; }
        button:disabled:hover { background: transparent; }
        button.primary { background: var(--surface-medium); }
        .progress-dots { display: flex; gap: 4px; }
        .progress-dot { width: 6px; height: 6px; border-radius: 50%; background: rgba(74, 111, 165, 0.3); transition: all 0.3s; }
        .progress-dot.active { background: var(--accent-primary); }
        .progress-dot.visited { background: rgba(74, 111, 165, 0.6); }

        @media (max-width: 1000px) {
            .main-content { flex-direction: column; align-items: center; }
            .dns-visualization { transform: scale(0.8); transform-origin: top center; }
            .info-panel { width: 100%; max-width: 500px; }
        }
    </style>
</head>
<body>
    <nav class="site-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <div class="nav-logo-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="100%" height="100%"><path d="M16 2L4 7v9c0 8 5 14 12 16 7-2 12-8 12-16V7L16 2z" fill="#0a1628" stroke="#4a6fa5" stroke-width="2"/><circle cx="16" cy="13" r="3.5" fill="none" stroke="#7ba3d4" stroke-width="2"/><rect x="14.5" y="15" width="3" height="5" rx="1" fill="#7ba3d4"/></svg></div>
                <span class="nav-logo-text">Cybersecurity Fundamentals</span>
            </a>
            <button class="nav-mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('mobile-open')">‚ò∞</button>
            <div class="nav-links">
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Networking <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="network-fundamentals.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Network Fundamentals</div>
                            <div class="nav-dropdown-item-desc">IPs, ports, servers & clients</div>
                        </a>
                        <a href="osi-model.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">OSI Model</div>
                            <div class="nav-dropdown-item-desc">7-layer communication framework</div>
                        </a>
                        <a href="tcp-ip-model.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">TCP/IP Model</div>
                            <div class="nav-dropdown-item-desc">4-layer practical internet model</div>
                        </a>
                        <a href="dns.html" class="nav-dropdown-item current">
                            <div class="nav-dropdown-item-title">DNS Lookup</div>
                            <div class="nav-dropdown-item-desc">Domain name resolution</div>
                        </a>
                        <a href="tcp-handshake.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">TCP Handshake</div>
                            <div class="nav-dropdown-item-desc">Three-way connection establishment</div>
                        </a>
                        <a href="vpn.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">VPN</div>
                            <div class="nav-dropdown-item-desc">Encrypted tunnels & privacy</div>
                        </a>
                        <a href="ssh.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">SSH</div>
                            <div class="nav-dropdown-item-desc">Secure remote access & key auth</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Web <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="http.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">HTTP Protocol</div>
                            <div class="nav-dropdown-item-desc">Methods, status codes, headers</div>
                        </a>
                        <a href="cookies.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Cookies</div>
                            <div class="nav-dropdown-item-desc">Maintaining state on the web</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Linux <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="linux.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Linux Fundamentals</div>
                            <div class="nav-dropdown-item-desc">Command line essentials</div>
                        </a>
                        <a href="linux-admin.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Packages & Logs</div>
                            <div class="nav-dropdown-item-desc">Software management & system logs</div>
                        </a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn" onclick="toggleDropdown(this)">Windows <svg viewBox="0 0 10 6" fill="none"><path d="M1 1l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></button>
                    <div class="nav-dropdown-menu">
                        <a href="windows-essentials.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Windows Essentials</div>
                            <div class="nav-dropdown-item-desc">File system, utilities & command line</div>
                        </a>
                        <a href="windows-security.html" class="nav-dropdown-item">
                            <div class="nav-dropdown-item-title">Windows Security</div>
                            <div class="nav-dropdown-item-desc">Defender, firewall & device protection</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="page">
        <div class="page-content">
            <header class="page-header">
                <h1 class="page-title">DNS Lookup</h1>
                <p class="page-subtitle">Domain Name System Resolution</p>
                
                <div class="nav-controls">
                    <button id="prevBtn" onclick="prevStep()" disabled>‚Üê PREV</button>
                    <div class="progress-dots" id="progressDots"></div>
                    <button id="nextBtn" onclick="nextStep()" class="primary">NEXT ‚Üí</button>
                </div>
            </header>

            <div class="main-content">
                <div class="dns-visualization">
                    <div class="dns-connections">
                        <svg viewBox="0 0 480 520">
                            <path id="path-browser-cache" class="connection-path" d="M 200 60 Q 120 85 90 110" />
                            <path id="path-browser-resolver" class="connection-path" d="M 280 60 Q 360 85 390 110" />
                            <path id="path-resolver-root" class="connection-path" d="M 395 165 L 395 220" />
                            <path id="path-root-tld" class="connection-path" d="M 395 275 L 395 330" />
                            <path id="path-tld-auth" class="connection-path" d="M 395 385 L 395 440" />
                            <path id="path-auth-result" class="connection-path" d="M 340 475 L 130 475" />
                            <path id="path-result-browser" class="connection-path" d="M 75 440 Q 75 250 240 60" />
                        </svg>
                    </div>

                    <div class="query-packet" id="queryPacket">?</div>

                    <div class="dns-node node-browser" onclick="goToStep(0)">
                        <div class="dns-node-icon">üåê</div>
                        <div class="dns-node-label">Your Device</div>
                        <div class="dns-node-title">Browser</div>
                    </div>

                    <div class="dns-node node-cache" onclick="goToStep(1)">
                        <div class="dns-node-icon">üíæ</div>
                        <div class="dns-node-label">Local</div>
                        <div class="dns-node-title">Cache</div>
                    </div>

                    <div class="dns-node node-resolver" onclick="goToStep(2)">
                        <div class="dns-node-icon">üîç</div>
                        <div class="dns-node-label">ISP</div>
                        <div class="dns-node-title">Resolver</div>
                    </div>

                    <div class="dns-node node-root" onclick="goToStep(3)">
                        <div class="dns-node-icon">üå≥</div>
                        <div class="dns-node-label">Global</div>
                        <div class="dns-node-title">Root Server</div>
                    </div>

                    <div class="dns-node node-tld" onclick="goToStep(4)">
                        <div class="dns-node-icon">üìÅ</div>
                        <div class="dns-node-label">.com / .org</div>
                        <div class="dns-node-title">TLD Server</div>
                    </div>

                    <div class="dns-node node-auth" onclick="goToStep(5)">
                        <div class="dns-node-icon">‚úì</div>
                        <div class="dns-node-label">Domain</div>
                        <div class="dns-node-title">Authoritative</div>
                    </div>

                    <div class="dns-node node-result" onclick="goToStep(7)">
                        <div class="dns-node-icon">üìç</div>
                        <div class="dns-node-label">Result</div>
                        <div class="dns-node-title">IP Address</div>
                    </div>
                </div>

                <div class="info-panel" id="infoPanel">
                    <div class="info-intro">
                        <p>DNS is the internet's phone book. When you type a website address, DNS translates that human-readable name into a numeric IP address that computers use to find each other.</p>
                        <div class="domain-example">example.com ‚Üí 93.184.216.34</div>
                        <p>This lookup happens in milliseconds, often before you even notice. Let's follow the journey of a DNS query.</p>
                        <p class="hint">Click a node or press Next to begin ‚Üí</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const infoPanel = document.getElementById('infoPanel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressDots = document.getElementById('progressDots');
        const queryPacket = document.getElementById('queryPacket');
        
        let currentStep = -1;
        const totalSteps = 8;

        for (let i = 0; i < totalSteps; i++) {
            const dot = document.createElement('div');
            dot.className = 'progress-dot';
            progressDots.appendChild(dot);
        }

        const steps = [
            {
                node: 'browser', icon: 'üåê', title: 'Browser', phase: 'Request initiated',
                action: 'User enters a domain name',
                description: 'When you type "example.com" into your browser and press Enter, your browser needs to find the actual server. But computers don\'t understand names ‚Äî they need an IP address (like 93.184.216.34). So the browser initiates a DNS lookup.',
                example: { label: 'You typed', content: 'example<span class="dim">.com</span>' },
                concepts: ['Domain name', 'URL', 'Address bar', 'HTTP request'],
                packetPos: { top: 25, left: 222 }
            },
            {
                node: 'cache', icon: 'üíæ', title: 'Local Cache', phase: 'Cache check',
                action: 'Checking local DNS cache',
                description: 'Before going out to the internet, your computer checks its local cache. If you\'ve visited this site recently, the IP address might already be stored locally. This cache exists in your browser, operating system, and sometimes your router.',
                example: { label: 'Cache lookup', content: 'example.com ‚Üí <span class="dim">not found</span>' },
                concepts: ['DNS cache', 'TTL', 'Browser cache', 'OS cache'],
                packetPos: { top: 135, left: 55 }
            },
            {
                node: 'resolver', icon: 'üîç', title: 'DNS Resolver', phase: 'Recursive lookup',
                action: 'Query sent to DNS resolver',
                description: 'If the cache misses, your request goes to a DNS resolver (usually run by your ISP or a service like Google\'s 8.8.8.8 or Cloudflare\'s 1.1.1.1). The resolver is like a librarian ‚Äî it doesn\'t know all the answers, but it knows how to find them.',
                example: { label: 'Query to resolver', content: '"Where is example.com?"' },
                concepts: ['Recursive resolver', 'ISP DNS', '8.8.8.8', '1.1.1.1'],
                packetPos: { top: 135, left: 375 }
            },
            {
                node: 'root', icon: 'üå≥', title: 'Root Server', phase: 'Starting at the top',
                action: 'Resolver queries root nameserver',
                description: 'The resolver starts at the top of the DNS hierarchy: the root servers. There are only 13 root server addresses worldwide (though hundreds of actual servers). The root doesn\'t know where example.com is, but it knows who handles all .com domains.',
                example: { label: 'Root response', content: '"Try the .com servers"' },
                concepts: ['Root nameservers', 'DNS hierarchy', '13 root servers', 'ICANN'],
                packetPos: { top: 245, left: 375 }
            },
            {
                node: 'tld', icon: 'üìÅ', title: 'TLD Server', phase: 'Finding the extension',
                action: 'Query to Top-Level Domain server',
                description: 'The TLD (Top-Level Domain) server manages all domains with a specific extension ‚Äî .com, .org, .net, etc. The .com TLD server doesn\'t know example.com\'s IP, but it knows which authoritative nameserver is responsible for that domain.',
                example: { label: 'TLD response', content: '"Try ns1.example.com"' },
                concepts: ['TLD', '.com', '.org', 'Registry', 'Verisign'],
                packetPos: { top: 355, left: 375 }
            },
            {
                node: 'auth', icon: '‚úì', title: 'Authoritative Server', phase: 'The source of truth',
                action: 'Query to authoritative nameserver',
                description: 'The authoritative nameserver is the final authority for a domain. It\'s configured by the domain owner and contains the actual DNS records. This server definitively answers: "example.com lives at IP address 93.184.216.34."',
                example: { label: 'A Record', content: 'example.com ‚Üí 93.184.216.34' },
                concepts: ['Authoritative NS', 'A record', 'AAAA record', 'Zone file'],
                packetPos: { top: 465, left: 375 }
            },
            {
                node: 'auth', icon: '‚Ü©Ô∏è', title: 'Response Journey', phase: 'Returning the answer',
                action: 'IP address sent back through the chain',
                description: 'The IP address travels back through the chain: authoritative ‚Üí resolver ‚Üí your computer. Each server along the way caches the result for future queries (respecting the TTL). The resolver sends the final answer to your computer.',
                example: { label: 'Response', content: '93.184.216.34 <span class="dim">(TTL: 86400s)</span>' },
                concepts: ['Response', 'Caching', 'TTL', 'Round trip'],
                packetPos: { top: 465, left: 55 }
            },
            {
                node: 'result', icon: 'üìç', title: 'Resolution Complete', phase: 'Connection ready',
                action: 'Browser receives IP address',
                description: 'Your browser now has the IP address! The whole process typically takes 20-120 milliseconds. Your browser caches this result and can now establish a TCP connection to the server at 93.184.216.34 to fetch the actual webpage.',
                example: { label: 'Ready to connect', content: 'TCP ‚Üí 93.184.216.34:443' },
                concepts: ['IP address', 'TCP connection', 'HTTPS', 'Port 443'],
                packetPos: { top: 25, left: 222 }
            }
        ];

        const nodeClasses = ['browser', 'cache', 'resolver', 'root', 'tld', 'auth', 'auth', 'result'];

        function updateUI() {
            document.querySelectorAll('.progress-dot').forEach((dot, i) => {
                dot.classList.remove('active', 'visited');
                if (i === currentStep) dot.classList.add('active');
                else if (i < currentStep) dot.classList.add('visited');
            });

            prevBtn.disabled = currentStep <= 0;
            nextBtn.textContent = currentStep >= totalSteps - 1 ? 'RESTART' : 'NEXT ‚Üí';

            document.querySelectorAll('.dns-node').forEach(n => n.classList.remove('active', 'visited'));
            document.querySelectorAll('.connection-path').forEach(p => p.classList.remove('active'));

            if (currentStep >= 0) {
                const step = steps[currentStep];
                
                document.querySelector(`.node-${step.node}`)?.classList.add('active');

                queryPacket.classList.add('visible');
                queryPacket.style.top = step.packetPos.top + 'px';
                queryPacket.style.left = step.packetPos.left + 'px';
                queryPacket.textContent = currentStep < 6 ? '?' : '‚úì';

                const paths = {
                    0: [],
                    1: ['path-browser-cache'],
                    2: ['path-browser-resolver'],
                    3: ['path-browser-resolver', 'path-resolver-root'],
                    4: ['path-browser-resolver', 'path-resolver-root', 'path-root-tld'],
                    5: ['path-browser-resolver', 'path-resolver-root', 'path-root-tld', 'path-tld-auth'],
                    6: ['path-tld-auth', 'path-auth-result'],
                    7: ['path-auth-result', 'path-result-browser']
                };
                (paths[currentStep] || []).forEach(id => document.getElementById(id)?.classList.add('active'));

                for (let i = 0; i < currentStep; i++) {
                    const n = document.querySelector(`.node-${steps[i].node}`);
                    if (n && !n.classList.contains('active')) n.classList.add('visited');
                }

                infoPanel.innerHTML = `
                    <div class="info-header">
                        <div class="info-icon">${step.icon}</div>
                        <div>
                            <div class="info-title">${step.title}</div>
                            <div class="info-phase">${step.phase}</div>
                        </div>
                    </div>
                    <div class="info-action">${step.action}</div>
                    <p class="info-description">${step.description}</p>
                    <div class="info-example">
                        <div class="info-example-label">${step.example.label}</div>
                        <div class="info-example-content">${step.example.content}</div>
                    </div>
                    <div class="info-concepts">
                        <div class="info-concepts-title">Key Concepts</div>
                        ${step.concepts.map(c => `<span class="concept-tag">${c}</span>`).join('')}
                    </div>
                `;
            } else {
                queryPacket.classList.remove('visible');
                infoPanel.innerHTML = `
                    <div class="info-intro">
                        <p>DNS is the internet's phone book. When you type a website address, DNS translates that human-readable name into a numeric IP address that computers use to find each other.</p>
                        <div class="domain-example">example.com ‚Üí 93.184.216.34</div>
                        <p>This lookup happens in milliseconds, often before you even notice. Let's follow the journey of a DNS query.</p>
                        <p class="hint">Click a node or press Next to begin ‚Üí</p>
                    </div>
                `;
            }
        }

        function goToStep(step) { currentStep = Math.max(-1, Math.min(totalSteps - 1, step)); updateUI(); }
        function nextStep() { currentStep = currentStep >= totalSteps - 1 ? -1 : currentStep + 1; updateUI(); }
        function prevStep() { if (currentStep > 0) { currentStep--; updateUI(); } }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') nextStep();
            else if (e.key === 'ArrowLeft') prevStep();
        });

        updateUI();
    </script>
    <script>
        function toggleDropdown(btn) {
            const dropdown = btn.parentElement;
            const wasOpen = dropdown.classList.contains('open');
            document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            if (!wasOpen) dropdown.classList.add('open');
        }
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-dropdown')) {
                document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('open'));
            }
        });
    </script>
</body>
</html>
